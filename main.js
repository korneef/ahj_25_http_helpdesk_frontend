(()=>{var e={238:()=>{document.getElementsByClassName("header-button_button")[0].addEventListener("click",(()=>{document.getElementsByClassName("background-for-form-task form-task-creator")[0].classList.toggle("form-task_invisible")}))},332:()=>{document.getElementsByClassName("background-for-form-task form-task-editor")[0].querySelector(".form").addEventListener("submit",(e=>{!function(e){e.preventDefault();const t=new XMLHttpRequest,s=new URLSearchParams,n=e.target.closest(".form"),a=n.dataset.ticketId;Array.from(n.elements).filter((e=>{let{name:t}=e;return t})).forEach((e=>{let{name:t,value:n}=e;return s.append(t,n)})),s.append("process","editTicket"),s.append("id",a),t.open("POST","http://localhost:7070"),t.send(s),e.target.closest(".form").querySelector(".work-with-task__close-button").click(),t.addEventListener("loadend",(e=>{if(200===e.target.status){const t=JSON.parse(e.target.response),s=document.querySelector(`[data-id="${t.id}"]`);s.querySelector(".task__name").textContent=t.name;const n=s.querySelector(".task__description");n.classList.contains("task__description_invisible")||(n.textContent=`${t.description}`)}}))}(e)}))},118:()=>{const e=Array.from(document.getElementsByClassName("work-with-task__close-button"));for(let t=0;t<e.length;t+=1)e[t].addEventListener("click",(e=>{e.target.closest(".background-for-form-task").classList.toggle("form-task_invisible");const t=e.target.closest(".form");null!==t&&t.reset()}))}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}(()=>{"use strict";function e(e){const t=new Date(e);let s=t.getDate();s<10&&(s=`0${s}`);let n=t.getMonth();n<10&&(n=`0${n}`);const a=t.getFullYear();let r=t.getHours();r<10&&(r=`0${r}`);let o=t.getMinutes();return o<10&&(o=`0${o}`),`${s}.${n}.${a} ${r}:${o}`}function t(e){const t=e.target.closest(".task"),{id:s}=t.dataset,n=new XMLHttpRequest;n.open("GET",`http://localhost:7070/?process=ticketById&id=${s}`),n.send(),n.addEventListener("loadend",(e=>{const t=JSON.parse(e.target.response),s=document.getElementsByClassName("background-for-form-task form-task-editor")[0],n=s.querySelector(".form");n.querySelector(".work-with-task__input-task-name").value=t.name,n.querySelector(".work-with-task__input-task-description").value=t.description,n.dataset.ticketId=t.id,s.classList.toggle("form-task_invisible")}))}function n(e){const t=e.target.closest(".task").dataset.id,s=new XMLHttpRequest,n=new URLSearchParams;n.append("process","deleteTicket"),n.append("id",t),s.open("POST","http://localhost:7070"),s.send(n),s.addEventListener("loadend",(e=>{const t=e.target.response;document.querySelector(`[data-id="${t}"]`).remove()}))}function a(e){const t=e.target.closest(".task").dataset.id,s=new URLSearchParams,n=new XMLHttpRequest;s.append("id",t),s.append("status",`${e.target.checked}`),s.append("process","checkboxChange"),n.open("POST","http://localhost:7070"),n.send(s)}function r(e){const t=e.currentTarget;if("BUTTON"===e.target.tagName||null!==e.target.closest("label"))return;const s=t.querySelector(".task__description");if(!s.classList.contains("task__description_invisible"))return s.classList.toggle("task__description_invisible"),void(s.textContent="");const n=t.dataset.id,a=new URLSearchParams,r=new XMLHttpRequest;a.append("process","ticketById"),a.append("id",n),r.open("GET",`http://localhost:7070/?${a}`),r.send(),r.addEventListener("loadend",(e=>{const t=JSON.parse(e.target.response),s=document.querySelector(`.task[data-id="${t.id}"]`).querySelector(".task__description");s.textContent=`${t.description}`,s.classList.toggle("task__description_invisible")}))}function o(s){const o=document.getElementsByClassName("task")[0],c=o.closest(".tasks-board");let d;Array.isArray(s)?d=s:(d=[],d.push(s));for(let s=0;s<d.length;s+=1){const i=o.cloneNode(!0);i.classList.remove("form-task_invisible"),i.addEventListener("click",(e=>{r(e)}));const l=i.querySelector(".task__name"),u=i.querySelector(".task__task-create-date"),p=e(d[s].date),m=i.querySelector(".task-button__button-edit"),k=i.querySelector(".task__form-checkbox");k.checked=d[s].status,k.addEventListener("change",(e=>{a(e)})),m.addEventListener("click",(e=>{t(e)})),i.querySelector(".task-button__button-delete").addEventListener("click",(e=>{n(e)})),i.dataset.id=d[s].id,l.textContent=d[s].name,u.textContent=p,c.insertAdjacentElement("beforeend",i)}}s(238),document.getElementsByClassName("background-for-form-task form-task-creator")[0].querySelector(".form").addEventListener("submit",(e=>{!function(e){e.preventDefault();const t=new XMLHttpRequest,s=new URLSearchParams,n=e.target.closest(".form");Array.from(n.elements).filter((e=>{let{name:t}=e;return t})).forEach((e=>{let{name:t,value:n}=e;return s.append(t,n)})),s.append("process","createTicket"),t.open("POST","http://localhost:7070"),t.send(s),e.target.closest(".form").querySelector(".work-with-task__close-button").click(),t.addEventListener("loadend",(e=>{200===e.target.status&&o(JSON.parse(e.target.response))}))}(e)})),s(118),document.addEventListener("DOMContentLoaded",(()=>{const e=new XMLHttpRequest;e.open("GET","http://localhost:7070/?process=allTickets"),e.send(),e.addEventListener("loadend",(e=>{!function(e){const{status:t}=e.target;t>=200&&t<300&&o(JSON.parse(e.target.response))}(e)}))})),s(332)})()})();